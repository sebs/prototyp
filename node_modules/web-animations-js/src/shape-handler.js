// Copyright 2014 Google Inc. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
//   You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//   See the License for the specific language governing permissions and
// limitations under the License.
(function(scope){var consumeLengthOrPercent=scope.consumeParenthesised.bind(null,scope.parseLengthOrPercent),consumeLengthOrPercentPair=scope.consumeRepeated.bind(void 0,consumeLengthOrPercent,/^/),mergeSizePair=scope.mergeNestedRepeated.bind(void 0,scope.mergeDimensions," "),mergeSizePairList=scope.mergeNestedRepeated.bind(void 0,mergeSizePair,",");function parseShape(input){var circle=scope.consumeToken(/^circle/,input);if(circle&&circle[0]){return["circle"].concat(scope.consumeList([scope.ignore(scope.consumeToken.bind(void 0,/^\(/)),consumeLengthOrPercent,scope.ignore(scope.consumeToken.bind(void 0,/^at/)),scope.consumePosition,scope.ignore(scope.consumeToken.bind(void 0,/^\)/))],circle[1]))}var ellipse=scope.consumeToken(/^ellipse/,input);if(ellipse&&ellipse[0]){return["ellipse"].concat(scope.consumeList([scope.ignore(scope.consumeToken.bind(void 0,/^\(/)),consumeLengthOrPercentPair,scope.ignore(scope.consumeToken.bind(void 0,/^at/)),scope.consumePosition,scope.ignore(scope.consumeToken.bind(void 0,/^\)/))],ellipse[1]))}var polygon=scope.consumeToken(/^polygon/,input);if(polygon&&polygon[0]){return["polygon"].concat(scope.consumeList([scope.ignore(scope.consumeToken.bind(void 0,/^\(/)),scope.optional(scope.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),scope.consumeSizePairList,scope.ignore(scope.consumeToken.bind(void 0,/^\)/))],polygon[1]))}}function mergeShapes(left,right){if(left[0]!==right[0])return;if("circle"==left[0]){return scope.mergeList(left.slice(1),right.slice(1),["circle(",scope.mergeDimensions," at ",scope.mergeOffsetList,")"])}if("ellipse"==left[0]){return scope.mergeList(left.slice(1),right.slice(1),["ellipse(",scope.mergeNonNegativeSizePair," at ",scope.mergeOffsetList,")"])}if("polygon"==left[0]&&left[1]==right[1]){return scope.mergeList(left.slice(2),right.slice(2),["polygon(",left[1],mergeSizePairList,")"])}}scope.addPropertiesHandler(parseShape,mergeShapes,["shape-outside"])})(webAnimations1);